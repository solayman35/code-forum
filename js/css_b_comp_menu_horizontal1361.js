window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||["more_options"];(function(B){var C=[];function I(N,L,M){function P(Q,R){if(Q.is("."+R)){Q.removeClass(R);var S=Q.data("removed-classes")||[];if(B.inArray(R,S)==-1){S.push(R)}Q.data("removed-classes",S)}}function O(Q,S){if(!Q.is("."+S)){Q.addClass(S);var R=Q.data("added-classes")||[];if(B.inArray(S,R)==-1){R.push(S)}Q.data("added-classes",R)}}N.each(function(){var Q=B(this);B.each(L,function(R,S){P(Q,S)});B.each(M,function(R,S){O(Q,S)})})}function A(L){L.each(function(){var M=B(this),O=M.data("added-classes")||[],N=M.data("removed-classes")||[];if(O.length){M.removeClass(O.join(" "))}if(N.length){M.addClass(N.join(" "))}})}function H(L){C.push(L)}function D(L,M,N){B.each(C,function(O,P){P(L,M,N)})}function J(N,O,P){if(!N.is(".js-comp-menu-dropdown__content--main-menu")){return}if(P=="dropdown"){var M=N.find(".current").addClass("b-comp-menu-dropdown__content-item--current");O.addClass("b-comp-menu-dropdown--main-menu").find(".js-comp-menu-dropdown__trigger").addClass("b-comp-menu-dropdown__trigger--icon-trigger").html('<span class="b-icon b-icon__hamburger b-comp-menu-dropdown__trigger-icon"></span>');N.find("li").first().addClass("b-comp-menu-dropdown__content-item--divider");var L='<li class="js-search-item b-comp-menu-dropdown__content-item--no-hover"><form action="'+B("#searchForm").attr("action")+'"><input type="text" autocomplete="off" class="b-form-input__input search-term" placeholder="'+vBulletin.phrase.get("search")+'..." name="q"><button title="'+vBulletin.phrase.get("search")+'" class="search-btn" type="submit"><span class="vb-icon vb-icon-search"></span></button></form></li><li class="js-search-item"><a href="'+pageData.baseurl+'/search">'+vBulletin.phrase.get("advanced_search")+"</a></li>";B(L).prependTo(N);B(".js-channel-subtabbar-list li").addClass("js-subtabbar-item b-comp-menu-dropdown__content-item--indent1").insertAfter(M)}else{N.find("li").removeClass("b-comp-menu-dropdown__content-item--divider b-comp-menu-dropdown__content-item--current b-comp-menu-dropdown__content-item--indent1");N.find(".js-search-item").remove();N.find(".js-subtabbar-item").appendTo(B(".js-channel-subtabbar-list"))}}function F(L,M,N){if(!L.is(".js-footer-nav-list")){return}if(N=="dropdown"){I(L,["h-right"],[]);I(M,[],["h-left","h-clear","h-margin-left-xxl"])}else{}}function G(L,O){if(O=="dropdown"){var S=L.data("dropdown-icon-classes")||"",X=S?" b-comp-menu-dropdown__trigger--icon-trigger":"",P=(L.data("dropdown-trigger-classes")||"")+X,W=L.data("dropdown-trigger-phrase")||"more_options",Q=L.data("dropdown-menu-classes")||"",R=B('<div class="b-comp-menu-dropdown js-comp-menu-dropdown '+Q+'"> <div class="b-comp-menu-dropdown__trigger js-comp-menu-dropdown__trigger js-button '+P+'" tabindex="0"> <span class="'+S+' b-comp-menu-dropdown__trigger-icon"> '+vBulletin.phrase.get(W)+" </span>  </div> </div>");R.insertAfter(L);D(L,R,O);var M=L.find("li");var U=L.find("a");var N=["h-right","h-left"];B.each(N,function(Y,Z){if(L.is("."+Z)){R.addClass(Z)}});var V=L.data("dropdown-content-classes"),T=["b-comp-menu-dropdown__content","js-comp-menu-dropdown__content"];if(V){V=V.split(" ")}else{V=[]}B.each(V,function(Y,Z){T.push(Z)});I(L,["h-margin-top-s","h-right","b-comp-menu-horizontal","channel-tabbar-list","h-hide-on-small","nav-list"],T);I(M,["h-margin-top-xs","b-post-control","b-post-control--responsive"],["b-comp-menu-dropdown__content-item"]);I(U,["h-left"],["h-block"]);L.appendTo(R);vBulletin.CompMenuDropdown.init()}else{var M=L.find("li");var U=L.find("a");A(L);A(M);A(U);var R=L.closest(".js-comp-menu-dropdown");L.insertAfter(R);D(L,R,O);R.remove()}}function E(){var M=B(".js-comp-menu-horizontal");if(M.length){var O=B("body"),N=O.is(".l-small"),L=O.is(".l-xsmall");M.each(function(P){var S=B(this),R=S.find("li").not(".b-post-control--disabled").length;var Q=((N&&S.is(".js-comp-menu--dropdown-on-small"))||(L&&S.is(".js-comp-menu--dropdown-on-xsmall")));if(Q&&R>0){if(!S.data("is-dropdown-menu")){G(S,"dropdown");S.data("is-dropdown-menu","1")}}else{if(S.data("is-dropdown-menu")){G(S,"horizontal");S.data("is-dropdown-menu","")}}})}}function K(){H(J);H(F);E();vBulletin.Responsive.Debounce.registerCallback(E)}B(K)})(jQuery);