window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.CompMenuDropdown={};(function(F){function E(J){var H=F(J.target),I=H.closest(".js-comp-menu-dropdown");if(!I.length){D(F(".js-comp-menu-dropdown"))}}function B(J){var I=F(J.target).closest(".js-comp-menu-dropdown");if(I.is(".b-comp-menu-dropdown--open")){D(I)}else{C(I)}var H=F(".js-comp-menu-dropdown").filter(function(){return(F(this).get(0)!=I.get(0))});D(H);return false}function A(I){var J=F(window),K=F(document),H=K.height();I.each(function(X,N){var M=F(N),f=M.offset(),Y=M.find(".js-comp-menu-dropdown__trigger").outerHeight(),Q=M.find(".js-comp-menu-dropdown__content"),W=F(window),b=W.width(),g=W.scrollLeft();M.addClass("b-comp-menu-dropdown--open");var d=Q.outerHeight(),Z=Q.outerWidth();M.removeClass("b-comp-menu-dropdown--open");var P=Q.css("margin-top"),R=parseInt(P,10),e=Y+d+R,a=f.top,S=H-a,j=a>=d,V=S>=e,T=f.left,c=T-g,O=b-c,L=c>=Z,U=O>=Z;if(j&&!V){M.addClass("b-comp-menu-dropdown--direction-up")}else{if(V&&!j){M.removeClass("b-comp-menu-dropdown--direction-up")}}var i,h;if(F("html").prop("dir")=="ltr"){h="b-comp-menu-dropdown__content--left";i="b-comp-menu-dropdown__content--right"}else{h="b-comp-menu-dropdown__content--right";i="b-comp-menu-dropdown__content--left"}if(L&&!U){Q.removeClass(h).addClass(i)}else{if(U&&!L){Q.removeClass(i).addClass(h)}}})}function C(I){A(I);I.addClass("b-comp-menu-dropdown--open");var H=I.find(".js-comp-menu-dropdown__trigger-arrow");H.each(function(J,L){var K=F(L);if(K.is(".b-icon__arrow-down-s--disabled")){K.removeClass("b-icon__arrow-down-s--disabled").addClass("b-icon__arrow-down-s--default")}})}function D(I){I.removeClass("b-comp-menu-dropdown--open");var H=I.find(".js-comp-menu-dropdown__trigger-arrow");H.each(function(J,L){var K=F(L);if(K.is(".b-icon__arrow-down-s--default")){K.removeClass("b-icon__arrow-down-s--default").addClass("b-icon__arrow-down-s--disabled")}})}function G(){var H=F(".js-comp-menu-dropdown__trigger").filter(function(){return(F(this).data("comp-menu-dropdown-initialized")!="1")});H.off("click",B).on("click",B).attr("tabindex","0").addClass("js-button").data("comp-menu-dropdown-initialized","1");F(document).off("click",E).on("click",E);H.each(function(J,L){var I=F(L);if(I.is(".b-comp-menu-dropdown__trigger--arrow")){var K=I.find(".js-comp-menu-dropdown__trigger-arrow");if(K.length<1){F('<span class="vb-icon b-icon__arrow-down-s--disabled js-comp-menu-dropdown__trigger-arrow h-align-middle"></span>').appendTo(I)}}});F(".js-comp-menu-dropdown").removeClass("b-comp-menu-dropdown--open-on-hover")}vBulletin.CompMenuDropdown.init=G;F(G)})(jQuery);